/*!
 * ui-bootstrap - compressed JS
 * @licence ui-bootstrap - v1.0.0 (2014-09-04)
 * https://github.com/hxkinggil/AngularBootStrap | Licence: MIT
 */
function getWebPage(a){var b={total:0,pageTotal:new Array,pageTotalNum:0,curPage:1,start:0,limit:a&&a.limit?a.limit:5,pageMin:1,pageMax:10,pageNum:a&&a.pageNum?a.pageNum:10,pageIndex:0,initWebPage:function(a){this.total=a.total,this.query=a.query,this.pageTotalNum=0,this.pageTotalNum=this.total%this.limit==0||this.total<this.limit?parseInt(this.total/this.limit)<1?1:parseInt(this.total/this.limit):parseInt(this.total/this.limit)+1,this.curPage=parseInt(this.start)/parseInt(this.limit)+1,this.curPage>this.pageMax&&this.pageIndex++,this.curPage<this.pageMin&&this.pageIndex--,this.pageMin=parseInt(this.pageIndex*this.pageNum)+1,this.pageMax=parseInt(this.pageIndex*this.pageNum)+this.pageNum,this.pageMax>this.pageTotalNum&&(this.pageMax=this.pageTotalNum),this.pageTotal.length=0;for(var b=this.pageMin;b<=this.pageMax;b++)this.pageTotal.push(b)},nextPage:function(a){return parseInt(this.start)+parseInt(this.limit)>=parseInt(this.total)?!1:(this.start="..."==a?this.pageMax*parseInt(this.limit):parseInt(this.start)+parseInt(this.limit),void(this.query&&this.query()))},lastPage:function(a){return parseInt(this.start)-parseInt(this.limit)<0?!1:(this.start="..."==a?(this.pageMin-2)*parseInt(this.limit):parseInt(this.start)-parseInt(this.limit),void(this.query&&this.query()))},clickPage:function(a){this.start=(a-1)*parseInt(this.limit),this.query&&this.query()},deleteOneRow:function(){var a=Math.round((this.total-1)/this.limit),c=Math.min(a,this.curPage);0==c&&(c=1),b.start=(c-1)*this.limit},changePage:function(a){this.start=0,this.limit=a,this.query&&this.query()}};return b}!function(){"use strict";angular.module("ui.bootstrap.paging",[]).constant("pagingConfig",{}).controller("PagingController",["$scope","$element","$attrs","$q","$log",function(){console.log("paging controller")}]).directive("paging",function(){return{restrict:"EA",controller:"PagingController",templateUrl:"template/paging/paging.html",replace:!0,require:"^?grid",scope:{pagingOptions:"=pagingOptions"},link:function(a,b,c,d){console.log("paging link"),a.webPage=d.grid.options.webpage}}})}(),function(){"use strict";angular.module("ui.bootstrap.grid",["ngSanitize","ui.bootstrap.tpls","ui.bootstrap.paging"]).constant("gridConfig",{}).controller("GridController",["$scope","$element","$attrs","$q","$log","gridClassFactory","gridConstants",function(a,b,c,d,e,f,g){function h(a,b){a&&a!==b&&(j.grid.options.columnDefs=a,j.grid.buildColumns().then(function(){}))}function i(a){e.debug(" --------dataWatch fired--------- ");var b=[];a&&(0===j.grid.columns.length&&(e.debug("loading cols in dataWatchFunction"),c.gridColumns||0!==j.grid.options.columnDefs.length||j.grid.buildColumnDefsFromData(a),b.push(j.grid.buildColumns().then(function(){}))),d.all(b).then(function(){j.grid.addRows(a)}))}console.log("grid controller");var j=this;j.grid=f.createGrid(a.gridOptions),a.grid=j.grid,j.grid.selectedRowEntity={},g.grid=a.grid,a.$watch("grid.selectedRowEntity",function(){a.gridOptions.selectedRowEntity=a.grid.selectedRowEntity}),c.gridColumns?c.$observe("gridColumns",function(a){j.grid.options.columnDefs=a,j.grid.buildColumns().then(function(){})}):j.grid.options.columnDefs.length>0&&j.grid.buildColumns();var k;k=angular.isString(a.gridOptions.data)?a.$parent.$watchCollection(a.gridOptions.data,i):a.$parent.$watchCollection(function(){return a.gridOptions.data},i);var l=a.$parent.$watchCollection(function(){return a.gridOptions.columnDefs},h);a.$on("$destroy",function(){k(),l()})}]).directive("grid",function(){return{restrict:"EA",controller:"GridController",templateUrl:"template/grid/grid.html",replace:!0,scope:!1,link:function(){console.log("grid link")}}})}(),function(){"use strict";angular.module("ui.bootstrap.grid").constant("gridColumnConfig",{}).controller("GridColumnController",["$scope","$element","$attrs","$log","gridConstants",function(a){console.log("column controller"),a.selectAll={},a.selectedRowEntity=new Array}]).directive("gridColumn",function(a){return{restrict:"EA",controller:"GridColumnController",templateUrl:"template/grid/grid-column.html",transclude:!0,scope:!0,require:"^?grid",link:function(b,c,d,e){console.log("column link"),b.columns=e.grid.columns,b.rows=e.grid.rows,b.single=e.grid.options.single,b.$watch("selectAll.checked",function(){console.log("监听全选属性"),e.grid.rows.forEach(function(c){void 0!==b.selectAll.checked&&(c.selected=b.selectAll.checked,c.selected?(c.style={"background-color":a.ROW_SELECT_COLOR},b.selectedRowEntity.push(c.entity)):(c.style=null,b.selectedRowEntity.length=0))})}),b.$watchCollection("selectedRowEntity",function(){console.log("监听全选数据数组"),e.grid.selectedRowEntity=b.selectedRowEntity})}}})}(),function(){"use strict";angular.module("ui.bootstrap.grid").constant("gridHeaderConfig",{}).controller("GridHeaderController",["$scope","$element","$attrs","$log",function(a){a.title="111"}]).directive("gridHeader",function(){return{restrict:"E",controller:"GridHeaderController",templateUrl:"template/grid/grid-header.html",transclude:!0,replace:!0,require:"^?grid",scope:{},link:function(a,b,c,d){a.title=d.grid.options.title,a.isHeaderShow=d.grid.isHeaderShow}}})}(),function(){"use strict";angular.module("ui.bootstrap.grid").constant("gridRowConfig",{}).controller("GridRowController",["$scope","$element","$attrs","$log","gridConstants","$compile",function(a){console.log("gridRow controller"),a.selectedRows=new Array,a.selectedRowEntity=new Array}]).directive("gridRow",function(a){return{restrict:"EA",controller:"GridRowController",templateUrl:"template/grid/grid-row.html",transclude:!0,replace:!0,scope:!0,require:"^?grid",compile:function(b){var c='<tr ng-repeat=" row in rows " ng-click="selectRow(row);" ng-style="row.style"><td ng-if="!single"><input type="checkbox" name="rowCheck" ng-model="row.selected"/></td><td ng-repeat=" col in columns " ng-show="col.visible" >',d="",e="</td></tr>";return a.grid.columns.forEach(function(a,b){d+=a.colDef.render?'<div ng-if="$index == '+b+' ">'+a.columnRender()+"</div>":a.colDef.filter?'<div ng-if="$index == '+b+' " ng-bind="$eval( row.getQualifiedColField( col )+\'|'+a.colDef.filter+"') \"></div>":'<div ng-if="$index == '+b+' " ng-bind="$eval( row.getQualifiedColField( col )) "></div>'}),$(b).html(c+d+e),{post:function(b,c,d,e){console.log("gridRow link"),b.grid=e.grid,b.columns=e.grid.columns,b.rows=e.grid.rows,b.single=e.grid.options.single,b.selectRow=function(c){if(console.log(" grid-row.js : 选择行方法 "),b.rows.forEach(function(d){if(b.single)c.uid!=d.uid?d.style={}:(d.style={"background-color":a.ROW_SELECT_COLOR},b.grid.selectedRowEntity=c.entity);else{if(c.uid!=d.uid)if(d.selected){for(var e=!0,f=0;f<b.selectedRows.length;f++)d.uid==b.selectedRows[f].uid&&(e=!1);e&&(b.selectedRows.push(d),b.sortSelectedRows(b.selectedRows))}else{for(var f=0;f<b.selectedRows.length;f++)d.uid==b.selectedRows[f].uid&&b.selectedRows.splice(f,1);b.sortSelectedRows(b.selectedRows)}else if(d.style={"background-color":a.ROW_SELECT_COLOR},d.selected=!d.selected,d.selected){var e=!0;if(b.selectedRows.length>0)for(var f=0;f<b.selectedRows.length;f++)d.uid==b.selectedRows[f].uid&&(e=!1);e&&(b.selectedRows.push(d),b.sortSelectedRows(b.selectedRows))}else{for(var f=0;f<b.selectedRows.length;f++)d.uid==b.selectedRows[f].uid&&b.selectedRows.splice(f,1);b.sortSelectedRows(b.selectedRows)}d.selected||(d.style={})}}),!b.single){b.selectedRowEntity.length=0;for(var d=0;d<b.selectedRows.length;d++)b.selectedRowEntity.push(b.selectedRows[d].entity);b.grid.selectedRowEntity=b.selectedRowEntity}},b.sortSelectedRows=function(a){a.length>0&&a.sort(function(a,b){return a.index<b.index?-1:a.index>b.index?1:0})}}}}}})}(),function(){angular.module("ui.bootstrap.grid").factory("Grid",["$log","$q","$compile","$parse","gridConstants","GridOptions","GridColumn","GridRow","gridUtil",function(a,b,c,d,e,f,g,h,i){var j=function(a){if(void 0===a||"undefined"==typeof a.id||!a.id)throw new Error("No ID provided. An ID must be given when creating a grid.");if(!/^[_a-zA-Z0-9-]+$/.test(a.id))throw new Error("Grid id '"+a.id+'" is invalid. It must follow CSS selector syntax rules.');this.id=a.id,delete a.id,this.options=new f,angular.extend(this.options,a),this.headerHeight=this.options.headerRowHeight,this.gridHeight=0,this.gridWidth=0,this.columnBuilders=[],this.rowBuilders=[],this.rowsProcessors=[],this.columnsProcessors=[],this.styleComputations=[],this.viewportAdjusters=[],this.isHeaderShow=this.options.title?!0:!1,this.renderContainers={},this.rows=[],this.columns=[],this.renderedRows=[],this.renderedColumns=[]};return j.prototype.buildColumns=function(){a.debug("buildColumns");var c=this,d=[];return c.options.columnDefs.forEach(function(a,b){c.preprocessColDef(a);var e=c.getColumn(a.name);e?e.updateColumnDef(a,e.index):(e=new g(a,b,c),c.columns.splice(b,0,e)),c.columnBuilders.forEach(function(b){d.push(b.call(c,a,e,c.options))})}),b.all(d)},j.prototype.preprocessColDef=function(a){if(!a.field&&!a.name)throw new Error("colDef.name or colDef.field property is required");void 0===a.name&&void 0!==a.field&&(a.name=a.field)},j.prototype.getColumn=function(a){var b=this.columns.filter(function(b){return b.colDef.name===a});return b.length>0?b[0]:null},j.prototype.buildColumnDefsFromData=function(a){this.options.columnDefs=i.getColumnsFromData(a,this.options.excludeProperties)},j.prototype.addRows=function(a){var b=this,c=b.rows.length;b.rows.length=0;for(var d=0;d<a.length;d++){var e=new h(a[d],d+c,b);b.rows.push(e)}},j.prototype.assignTypes=function(){var b=this;b.options.columnDefs.forEach(function(c,d){if(!c.type){var e=new g(c,d,b),f=b.rows.length>0?b.rows[0]:null;f?c.type=i.guessType(b.getCellValue(f,e)):(a.log("Unable to assign type from data, so defaulting to string"),c.type="string")}})},j.prototype.columnRender=function(a){return i.trustAsHtml(a)},j}])}(),function(){angular.module("ui.bootstrap.grid").factory("GridColumn",["gridConstants","gridUtil",function(a,b){function c(a,b,c){var d=this;d.grid=c,a.index=b,d.updateColumnDef(a)}return c.prototype.setPropertyOrDefault=function(a,b,c){var d=this;d[b]="undefined"!=typeof a[b]&&a[b]?a[b]:"undefined"!=typeof d[b]?d[b]:c?c:{}},c.prototype.updateColumnDef=function(a,d){var e=this;if(e.colDef=a,e.index="undefined"==typeof d?a.index:d,void 0===a.name)throw new Error("colDef.name is required for column at index "+e.index);var f="Cannot parse column width '"+a.width+"' for column named '"+a.name+"'";if(b.isNullOrUndefined(a.width))e.width="*";else if(angular.isNumber(a.width))e.width=a.width;else if(b.endsWith(a.width,"%")){var g=a.width.replace(/%/g,""),h=parseInt(g,10);if(isNaN(h))throw new Error(f);e.width=a.width}else if(a.width.match(/^(\d+)$/))e.width=parseInt(a.width.match(/^(\d+)$/)[1],10);else if(!a.width.match(/^\*+$/))throw new Error(f);c.prototype.unsort=function(){this.sort={}},e.minWidth=a.minWidth?a.minWidth:50,e.maxWidth=a.maxWidth?a.maxWidth:9e3,e.field=void 0===a.field?a.name:a.field,e.displayName=void 0===a.displayName?b.readableColumnName(a.name):a.displayName,e.cellClass=a.cellClass,e.cellFilter=a.cellFilter?a.cellFilter:"",e.visible=b.isNullOrUndefined(a.visible)||a.visible,e.renderClick=a.renderClick,e.headerClass=a.headerClass,e.enableSorting="undefined"!=typeof a.enableSorting?a.enableSorting:!0,e.sortingAlgorithm=a.sortingAlgorithm,e.enableFiltering="undefined"!=typeof a.enableFiltering?a.enableFiltering:!0,e.setPropertyOrDefault(a,"menuItems",[]),e.setPropertyOrDefault(a,"sort"),e.setPropertyOrDefault(a,"filter"),e.setPropertyOrDefault(a,"filters",[])},c.prototype.getColClass=function(b){var c=a.COL_CLASS_PREFIX+this.index;return b?"."+c:c},c.prototype.getColClassDefinition=function(){return" .grid"+this.grid.id+" "+this.getColClass(!0)+" { width: "+this.drawnWidth+"px; }"},c.prototype.getRenderContainer=function(){var a=this,b=a.renderContainer;return(null===b||""===b||void 0===b)&&(b="body"),a.grid.renderContainers[b]},c.prototype.showColumn=function(){this.colDef.visible=!0},c.prototype.hideColumn=function(){this.colDef.visible=!1},c.prototype.columnRender=function(){return b.trustAsHtml(this.colDef.render)},c}])}(),function(){angular.module("ui.bootstrap.grid").factory("GridOptions",[function(){function a(){this.onRegisterApi=angular.noop(),this.data=[],this.columnDefs=[],this.excludeProperties=["$$hashKey"],this.headerRowHeight=30,this.enableSorting=!0,this.enableFiltering=!1,this.selectedRowEntity={},this.single=!0}return a}])}(),function(){angular.module("ui.bootstrap.grid").factory("GridRow",["gridUtil",function(a){var b=function(b,c,d){this.grid=d,this.entity=b,this.index=c,this.uid=a.nextUid(),this.visible=!0,this.selected=!1};return b.prototype.getQualifiedColField=function(a){return"row.entity."+a.field},b.prototype.getEntityQualifiedColField=function(a){return"entity."+a.field},b}])}(),function(){"use strict";angular.module("ui.bootstrap.grid").constant("gridConstants",{CUSTOM_FILTERS:/CUSTOM_FILTERS/g,COL_FIELD:/COL_FIELD/g,DISPLAY_CELL_TEMPLATE:/DISPLAY_CELL_TEMPLATE/g,TEMPLATE_REGEXP:/<.+>/,COL_CLASS_PREFIX:"ui-grid-col",events:{GRID_SCROLL:"uiGridScroll",GRID_SCROLLING:"uiGridScrolling",COLUMN_MENU_SHOWN:"uiGridColMenuShown",ITEM_DRAGGING:"uiGridItemDragStart"},keymap:{TAB:9,STRG:17,CTRL:17,CTRLRIGHT:18,CTRLR:18,SHIFT:16,RETURN:13,ENTER:13,BACKSPACE:8,BCKSP:8,ALT:18,ALTR:17,ALTRIGHT:17,SPACE:32,WIN:91,MAC:91,FN:null,UP:38,DOWN:40,LEFT:37,RIGHT:39,ESC:27,DEL:46,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123},ASC:"asc",DESC:"desc",filter:{STARTS_WITH:2,ENDS_WITH:4,EXACT:8,CONTAINS:16,GREATER_THAN:32,GREATER_THAN_OR_EQUAL:64,LESS_THAN:128,LESS_THAN_OR_EQUAL:256,NOT_EQUAL:512},CURRENCY_SYMBOLS:["ƒ","$","£","$","¤","¥","៛","₩","₱","฿","₫"],ROW_SELECT_COLOR:"#DFE8F6",ROW_SELECT_COLOR_INFO:"#DFE8F6"})}(),function(){"use strict";angular.module("ui.bootstrap.grid").service("gridClassFactory",["$q","$compile","$templateCache","gridConstants","$log","Grid","GridColumn","GridRow",function(a,b,c,d,e,f){console.log("gridClassFactory service");var g={newId:function(){var a=(new Date).getTime();return a+=1},createGrid:function(a){a="undefined"!=typeof a?a:{},a.id=void 0===a.id||null===a.id?this.newId():a.id;var b=new f(a);return b}};return g}])}(),function(){var a=["0","0","0"],b="uiGrid-";angular.module("ui.bootstrap.grid").service("gridUtil",["$log","$window","$document","$http","$templateCache","$timeout","$injector","$q","$sce",function(c,d,e,f,g,h,i,j,k){console.log("gridUtil service");var l={getColumnsFromData:function(a,b){var c=[];if(!a||"undefined"==typeof a[0]||void 0===a[0])return[];angular.isUndefined(b)&&(b=[]);var d=a[0];return angular.forEach(d,function(a,d){-1===b.indexOf(d)&&c.push({name:d})}),c},newId:function(){var a=(new Date).getTime();return function(){return a+=1}}(),isNullOrUndefined:function(a){return void 0===a||null===a?!0:!1},readableColumnName:function(a){return"undefined"==typeof a||void 0===a||null===a?a:("string"!=typeof a&&(a=String(a)),a.replace(/_+/g," ").replace(/^[A-Z]+$/,function(a){return angular.lowercase(angular.uppercase(a.charAt(0))+a.slice(1))}).replace(/(\w+)/g,function(a){return angular.uppercase(a.charAt(0))+a.slice(1)}).replace(/(\w+?(?=[A-Z]))/g,"$1 "))},guessType:function(a){var b=typeof a;switch(b){case"number":case"boolean":case"string":return b;default:return angular.isDate(a)?"date":"object"}},nextUid:function(){for(var c,d=a.length;d;){if(d--,c=a[d].charCodeAt(0),57===c)return a[d]="A",a.join("");if(90!==c)return a[d]=String.fromCharCode(c+1),a.join("");a[d]="0"}return a.unshift("0"),b+a.join("")},trustAsHtml:function(a){return k.trustAsHtml(a)}};return l}])}();